@model Merp.Web.UI.Areas.Accountancy.Models.JobOrder.FixedPriceJobOrderDetailViewModel
@{
    Layout = "";
}
<script>
    (function () {
        var homePageApp = angular.module('myApp', []);
    }());
    (function (module) {
        var balanceController = function ($scope, $http) {
            $scope.refreshBalance = function () {
                var jobOrderId = '@Model.JobOrderId';
                if (dateFrom != null && dateFrom !== '' && dateTo != null && dateTo !== '')
                {
                    var url = '/Accountancy/JobOrder/GetBalance/?jobOrderId=' + jobOrderId + '&dateFrom=' + dateFrom.value + '&dateTo=' + dateTo.value;
                    $http.get(url).success(function (data) {
                        $scope.Balances = data;
                    });
                }
            }
        }
        module.controller('balanceController', ['$scope', '$http', balanceController]);
    }(angular.module('myApp')))
</script>
<div data-ng-controller="balanceController" data-ng-app="myApp">
    <form class="form-inline">
        <div class="form-group">
            <label class="sr-only" for="dateFrom">Date From</label>
            <input type="date" class="form-control" id="dateFrom" placeholder="Date From">
        </div>
        <div class="form-group">
            <label class="sr-only" for="dateTo">Date To</label>
            <input type="date" class="form-control" id="dateTo" placeholder="Date To">
        </div>
        <button type="button" class="btn btn-default" data-ng-click="refreshBalance()">Apply</button>
    </form>
    <table class="table table-striped table-hover">
        <tr>
            <td>Date</td>
            <td>Balance</td>
        </tr>
        <tr data-ng-repeat="balance in Balances">
            <td>{{balance.Date | date:'dd-MM-yyyy'}}</td>
            <td>{{balance.Balance}}</td>
        </tr>
    </table>
</div>

